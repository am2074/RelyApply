<hr>

<div>
  <h2><strong>Total Reviews for <%= @company.name %>: <%= @company.reviews.size %></strong></h2>
  <p><I>*REMINDER: IT TAKES 2-3 WEEKS ON AVERAGE TO HEAR BACK FROM A JOB APPLICATION.*</I></p>
</div>
<hr>
<div class="panel panel-default">
<div class="panel-body">
  <%= search_form_for @q, url: company_reviews_path(params[:company_id]) do |f| %> 
    <h4><strong>Filter & Search</strong></h4>
     <div>
      <%= f.label :response_time_eq, "Response Time" %>
      <%= f.select :response_time_eq, options_for_select([
        ["1 week","1 week"],
        ["2 weeks","2 weeks"],
        ["3 weeks","3 weeks"],
        ["Greater than 4 weeks","Greater than 4 weeks"]
        ] , @q.response_time_eq), prompt: '--Select--' %>
    </div>

     <div>
      <%= f.label :application_type_eq, "Application Type" %>
      <%= f.select :application_type_eq, options_for_select([
        ["In Person","In Person"],
        ["Online","Online"],
        ["Referral","Referral"]
        ] , @q.application_type_eq),prompt: '--Select--'   %>
    </div>
    
    <div>
      <%= f.label :satisfaction_eq, "Satisfaction Level" %>
      <%= f.select :satisfaction_eq, options_for_select([
        ["Highly satisfied","Highly Satisfied."],
        ["Average Satisfaction","Average Satisfaction"],
        ["Poor Satisfaction","Poor Satisfaction"]
        ] , @q.satisfaction_eq), prompt: '--Select--'   %>
    </div>

    <div>
      <%= f.label :position%>
      <%= f.search_field :position_cont, :placeholder => 'Search Position'%>
    </div>

    <div>
      <%= f.label :employment_type_eq, "Employment Type" %>
      <%= f.select :employment_type_eq, options_for_select([
        ["Full-Time","Full-Time"],
        ["Part-Time","Part-Time"],
        ["Intern","Intern"],
        ["Temporary","Temporary"],
        ["Contractor","Contractor"]
        ] , @q.employment_type_eq), prompt: '--Select--'  %>
    </div>

    <div>
      <%= f.label :Location, "Location" %>
      <%= text_field_tag :search, params[:search], :placeholder => 'Enter City, State or Zip Code'%>
    </div>
      <%= f.submit :class => "btn btn-primary" %>  <a href="<%=company_reviews_path%>" class="btn btn-primary" color="black">Clear filters</a>
  <% end %>
</div>
  
</div>
 <div>
    <%= sort_link(@q, :created_at, default_order: :asc) do %>
      <strong>Sort by Date</strong>
    <% end %>
  </div>  
</hr>


<div>
  <% @reviews.each do |review| %>
  <div class="well" id=reviewIndex>
   <div class="comments_wrapper clearfix">
    
     <div class="pull-left">
       <p><strong>Response Time for an interview or rejection:</strong> <%= review.response_time %></p>
       <p><strong>Response Time Satisfaction:</strong> <%= review.satisfaction %></p>
       <p><strong>Position:</strong> <%= review.position %></p>
       <p><strong>Employment Type:</strong><%= review.employment_type %></p>
       <p><strong>Application Type:</strong> <%= review.application_type %></p>
       <p><strong>Location:</strong> <%= review.address.chomp(', USA') %></p>
       <p><small><I>Submitted</I> <strong><%= review.created_at.strftime("%B %d, %Y") %></strong></small></p>
       <div colspan="1" align="center">
        <%= link_to like_review_path(review), method: :put, class: "btn btn-default btn-sm" do %>
          <span class="glyphicon glyphicon-chevron-up"></span>
          Accurate
          (<%= review.get_upvotes.size %>)
          <% end %>
        
        <%= link_to dislike_review_path(review), method: :put, class: "btn btn-default btn-sm" do %>
          <span class="glyphicon glyphicon-chevron-down"></span>
          Inaccurate
          (<%= review.get_downvotes.size %>)
          <% end %>
      </div>
     </div>
    </div> 
   </div>   
  <% end %>
</div>