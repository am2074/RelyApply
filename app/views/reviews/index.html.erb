<hr>

<div>
  <h2><strong>Total Reviews for <%= @company.name %>: <%= @company.reviews.size %></strong></h2>
  <p><I>*REMINDER: IT TAKES 2-3 WEEKS ON AVERAGE TO HEAR BACK FROM A JOB APPLICATION.*</I></p>
</div>
<hr>
<div>
<%= search_form_for @q, url: company_reviews_path(params[:company_id]) do |f| %> 
 <h4><strong>Filter & Search</strong></h4>
   <div>
    <%= f.label :response_time_eq, "Response Time" %>
    <%= f.select :response_time_eq, options_for_select([
      ["1 week","1 week"],
      ["2 weeks","2 weeks"],
      ["3 weeks","3 weeks"],
      ["Greater than 4 weeks","Greater than 4 weeks"]
      ] , @q.response_time_eq)  %>
  </div>

   <div>
    <%= f.label :application_type_eq, "Application Type" %>
    <%= f.select :application_type_eq, options_for_select([
      ["In Person","In Person"],
      ["Online","Online"],
      ["Referral","Referral"]
      ] , @q.application_type_eq)  %>
  </div>
  
  <div>
    <%= f.label :satisfaction_eq, "Application Type" %>
    <%= f.select :satisfaction_eq, options_for_select([
      ["Highly satisfied","Highly Satisfied."],
      ["Average Satisfaction","Average Satisfaction"],
      ["Poor Satisfaction","Poor Satisfaction"]
      ] , @q.satisfaction_eq)  %>
  </div>

  <div>
    <%= f.label :position%>
    <%= f.search_field :position_cont, :placeholder => 'Search Position'%>
  </div>

  <div>
    <%= f.label :employment_type_eq, "Employment Type" %>
    <%= f.select :employment_type_eq, options_for_select([
      ["Full-Time","Full-Time"],
      ["Part-Time","Part-Time"],
      ["Intern","Intern"],
      ["Temporary","Temporary"],
      ["Contractor","Contractor"]
      ] , @q.employment_type_eq)  %>
  </div>
  <%= f.submit %>
<% end %>
</div>
<div>
  <h4><strong>Sort by</strong></h4>
  <div>
  <%= sort_link(@q, :created_at) do %>
  <strong>When Review Submitted</strong>
<% end %>
  </div>
</div>
</hr>
<div>
<% @reviews.each do |review| %>
 <div class="comments_wrapper clearfix">
  <div class="pull-left">
   <p class="lead">Position: <%= review.position %></p>
   <p class="lead">Employment Type:<%= review.employment_type %></p>
   <p class="lead">Application Type: <%= review.application_type %></p>
   <p class="lead">Response Time for an interview or rejection: <%= review.response_time %></p>
   <p class="lead">Response Time Satisfaction: <%= review.satisfaction %></p>
   <p class="lead">Location: <%= review.location %></p>
   <p><small>Submitted <strong><%= time_ago_in_words(review.created_at) %> ago</strong></small></p>
    <%= link_to like_review_path(review), method: :put, class: "btn btn-default btn-sm" do %>
      <span class="glyphicon glyphicon-chevron-up"></span>
      Accurate
      <%= review.get_upvotes.size %>
      <% end %>
    
    <%= link_to dislike_review_path(review), method: :put, class: "btn btn-default btn-sm" do %>
      <span class="glyphicon glyphicon-chevron-down"></span>
      Inaccurate
      <%= review.get_downvotes.size %>
      <% end %>
<% end %>
  </div>
</div>